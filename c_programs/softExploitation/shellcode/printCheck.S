.section .data
file: .string "flag"
buffer: .space 48
.section .text
.globl _start
_start:
    # open syscall open()
    mov $2, %rax # syscal 2 = open
    lea file(%rip), %rdi # buffer = 5 bytes from %rbp (f l a g \x00)(5 bytes including nullT)
    mov $0, %rsi # O_RDONLY = 0
    syscall
    # read()
    mov %rax, %rdi # fd return from open
    mov $0, %rax # syscall 0 = read()
    lea buffer(%rip), %rsi # write whats read into 48th byte in buffer
    mov $47, %rdx # 48 size read
    syscall
    #write()
    mov $1, %rax # syscall 1 = write()
    mov $1, %rdi # fd = stdout
    lea buffer(%rip), %rsi # buffer = 128 bytes from %rbp
    mov $48, %rdx
    syscall
    # exit syscall
    xor %rax, %rax
    mov $60, %rax
    mov %rax, %rdi
    syscall